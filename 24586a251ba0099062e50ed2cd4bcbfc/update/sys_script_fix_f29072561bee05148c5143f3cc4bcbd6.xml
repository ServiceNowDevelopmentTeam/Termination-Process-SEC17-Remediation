<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <before>false</before>
        <description/>
        <name>Find Missing Users for SEC05 Auto-Term</name>
        <record_for_rollback>false</record_for_rollback>
        <script><![CDATA[(function() {
	var i=0;
	try {
		var importGR = new GlideRecord('x_apig_sox_record_term_list');
importGR.addEncodedQuery('u_onpremisesdistinguishednameLIKEOU=Users');
		importGR.query();
		var logString = 'UPNs Not Existing in SNOW:\n';
		while(importGR.next()){
			var currentUPN = importGR.u_userprincipalname.toString();
			var userGr = new GlideRecord('sys_user');
			userGr.addQuery('email',currentUPN);
			userGr.query();
			if(!userGr.hasNext()){
				logString += currentUPN + '\n';
			i++;
			}
		}
		gs.error("Missing Users: " + i);
		gs.error(logString);
	} catch (ex) {
		var message = ex;
		gs.error("Creating Terminations Failed: " + message);
		gs.error("Terminations Run Before Failure: " + i);
	}
	
})();]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>Terry.Lillo</sys_created_by>
        <sys_created_on>2022-04-01 14:57:59</sys_created_on>
        <sys_id>f29072561bee05148c5143f3cc4bcbd6</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>Find Missing Users for SEC05 Auto-Term</sys_name>
        <sys_package display_value="Termination Process SEC17 Remediation" source="x_apig_sox_record">24586a251ba0099062e50ed2cd4bcbfc</sys_package>
        <sys_policy/>
        <sys_scope display_value="Termination Process SEC17 Remediation">24586a251ba0099062e50ed2cd4bcbfc</sys_scope>
        <sys_update_name>sys_script_fix_f29072561bee05148c5143f3cc4bcbd6</sys_update_name>
        <sys_updated_by>Terry.Lillo</sys_updated_by>
        <sys_updated_on>2022-04-01 15:02:54</sys_updated_on>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
